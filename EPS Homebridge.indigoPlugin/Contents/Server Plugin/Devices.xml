<?xml version="1.0"?>
<!-- EPS (ColoradoFourWheeler) Plugin -->
<Devices>
	<!-- =========== SWITCH =========== -->
	<Device type="relay" id="Homebridge-Relay">
		<Name>Homebridge Switch Wrapper</Name>
		<ConfigUI>
			
			<!-- *********** ON *********** -->
			<Field type="menu" id="methodOn" defaultValue="device" >
				<Label>On method:</Label>
				<List>
					<Option value="device">Single Device</Option>
					<Option value="action">Action Group</Option>
				</List>
			</Field>
			
			<Field id="deviceOn" type="menu" visibleBindingId="methodOn" visibleBindingValue="device">
				<Label>Device:</Label>
				<List class="indigo.devices" />
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="menu" id="deviceActionOn" defaultValue="turnOn" visibleBindingId="methodOn" visibleBindingValue="device">
				<Label>Action:</Label>
				<List class="self" filter="#deviceactions#[index=deviceActionOn, srcfield=deviceOn, allowui=true]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<!-- ** ACTION FIELD 1 ** -->
			<Field type="menu" id="optionGroupOn1" defaultValue="hidden" hidden="true">
				<Label>GROUP 1 DISPLAY</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="textfield">Text Field</Option>
					<Option value="menu">Menu</Option>
					<Option value="list">List</Option>
					<Option value="checkbox">Checkbox</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="optionLabelOn1" type="textfield" defaultValue="" readonly="true" visibleBindingId="optionGroupOn1" visibleBindingValue="textfield,menu,list">
				<Label>Field:</Label>
			</Field>
			
			<Field id="checkValueOn1" type="checkbox" visibleBindingId="optionGroupOn1" visibleBindingValue="checkbox">
				<Label> </Label>
				<Description>Enable</Description>
			</Field>
			
			<Field id="strValueOn1" type="textfield" visibleBindingId="optionGroupOn1" visibleBindingValue="textfield">
				<Label>Value:</Label>
			</Field>
			
			<Field type="menu" id="menuValueOn1" defaultValue="on" visibleBindingId="optionGroupOn1" visibleBindingValue="menu">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=menuValueOn1, group=1, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="list" id="listValueOn1" defaultValue="on" visibleBindingId="optionGroupOn1" visibleBindingValue="list">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=listValueOn1, group=1, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<!-- ** ACTION FIELD 2 ** -->
			<Field type="menu" id="optionGroupOn2" defaultValue="hidden" hidden="true">
				<Label>GROUP 2 DISPLAY</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="textfield">Text Field</Option>
					<Option value="menu">Menu</Option>
					<Option value="list">List</Option>
					<Option value="checkbox">Checkbox</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="optionLabelOn2" type="textfield" defaultValue="" readonly="true" visibleBindingId="optionGroupOn2" visibleBindingValue="textfield,menu,list">
				<Label>Field:</Label>
			</Field>
			
			<Field id="checkValueOn2" type="checkbox" visibleBindingId="optionGroupOn2" visibleBindingValue="checkbox">
				<Label> </Label>
				<Description>Enable</Description>
			</Field>
			
			<Field id="strValueOn2" type="textfield" visibleBindingId="optionGroupOn2" visibleBindingValue="textfield">
				<Label>Value:</Label>
			</Field>
			
			<Field type="menu" id="menuValueOn2" defaultValue="on" visibleBindingId="optionGroupOn2" visibleBindingValue="menu">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=menuValueOn2, group=2, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="list" id="listValueOn2" defaultValue="on" visibleBindingId="optionGroupOn2" visibleBindingValue="list">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=listValueOn2, group=2, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>	
			
			<!-- ** ACTION FIELD 3 ** -->
			<Field type="menu" id="optionGroupOn3" defaultValue="hidden" hidden="true">
				<Label>GROUP 3 DISPLAY</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="textfield">Text Field</Option>
					<Option value="menu">Menu</Option>
					<Option value="list">List</Option>
					<Option value="checkbox">Checkbox</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="optionLabelOn3" type="textfield" defaultValue="" readonly="true" visibleBindingId="optionGroupOn3" visibleBindingValue="textfield,menu,list">
				<Label>Field:</Label>
			</Field>
			
			<Field id="checkValueOn3" type="checkbox" visibleBindingId="optionGroupOn3" visibleBindingValue="checkbox">
				<Label> </Label>
				<Description>Enable</Description>
			</Field>
			
			<Field id="strValueOn3" type="textfield" visibleBindingId="optionGroupOn3" visibleBindingValue="textfield">
				<Label>Value:</Label>
			</Field>
			
			<Field type="menu" id="menuValueOn3" defaultValue="on" visibleBindingId="optionGroupOn3" visibleBindingValue="menu">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=menuValueOn3, group=3, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="list" id="listValueOn3" defaultValue="on" visibleBindingId="optionGroupOn3" visibleBindingValue="list">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=listValueOn3, group=3, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>					
			
			<!-- ** END ACTION FIELDS ** -->
			
			<Field type="checkbox" id="deviceOnShowStates" defaultValue="false" hidden="true">
				<Label> </Label>
				<Description>Determines if the user should provide a state and value to indicate status</Description>
			</Field>
			
			<Field type="menu" id="deviceOnState" defaultValue="" visibleBindingId="deviceOnShowStates" visibleBindingValue="true">
				<Label>State indicating On:</Label>
				<List class="self" filter="#devicestates#[index=deviceOnState, srcfield=deviceOn, allowui=True]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="textfield" id="deviceOnStateValue" defaultValue="" visibleBindingId="deviceOnShowStates" visibleBindingValue="true">
				<Label>State value indicating On:</Label>
			</Field>
			
			<Field id="deviceListOn" type="list" rows="8" visibleBindingId="methodOn" visibleBindingValue="list">
				<Label>Devices:</Label>
				<List class="indigo.devices" />
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="actionOn" type="menu" visibleBindingId="methodOn" visibleBindingValue="action">
				<Label>Action group:</Label>
				<List class="indigo.actionGroups" />
			</Field>
			
			<Field id="sep_on" type="separator" />
			
			<!-- *********** OFF *********** -->
			
			<Field type="menu" id="methodOffMaster" defaultValue="passthrough" >
				<Label>Off method:</Label>
				<List>
					<Option value="passthrough">Pass Through</Option>
					<Option value="on">Use On Method</Option>
					<Option value="same">Same As On Method</Option>
					<Option value="device">Single Device</Option>
					<Option value="action">Action Group</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="menu" id="methodOff" defaultValue="hidden" hidden="true">
				<Label>Changed depending on methodOffMaster</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="device">Single Device</Option>
					<Option value="action">Action Group</Option>
				</List>
			</Field>
			
			<Field id="deviceOff" type="menu" visibleBindingId="methodOff" visibleBindingValue="device">
				<Label>Device:</Label>
				<List class="indigo.devices" />
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="menu" id="deviceActionOff" defaultValue="turnOn" visibleBindingId="methodOff" visibleBindingValue="device">
				<Label>Action:</Label>
				<List class="self" filter="#deviceactions#[index=deviceActionOff, srcfield=deviceOff, allowui=true]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<!-- ** ACTION FIELD 1 ** -->
			<Field type="menu" id="optionGroupOff1" defaultValue="hidden" hidden="true">
				<Label>GROUP 1 DISPLAY</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="textfield">Text Field</Option>
					<Option value="menu">Menu</Option>
					<Option value="list">List</Option>
					<Option value="checkbox">Checkbox</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="optionLabelOff1" type="textfield" defaultValue="" readonly="true" visibleBindingId="optionGroupOff1" visibleBindingValue="textfield,menu,list">
				<Label>Field:</Label>
			</Field>
			
			<Field id="checkValueOff1" type="checkbox" visibleBindingId="optionGroupOff1" visibleBindingValue="checkbox">
				<Label> </Label>
				<Description>Enable</Description>
			</Field>
			
			<Field id="strValueOff1" type="textfield" visibleBindingId="optionGroupOff1" visibleBindingValue="textfield">
				<Label>Value:</Label>
			</Field>
			
			<Field type="menu" id="menuValueOff1" defaultValue="on" visibleBindingId="optionGroupOff1" visibleBindingValue="menu">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=menuValueOff1, group=1, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="list" id="listValueOff1" defaultValue="on" visibleBindingId="optionGroupOff1" visibleBindingValue="list">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=listValueOff1, group=1, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<!-- ** ACTION FIELD 2 ** -->
			<Field type="menu" id="optionGroupOff2" defaultValue="hidden" hidden="true">
				<Label>GROUP 2 DISPLAY</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="textfield">Text Field</Option>
					<Option value="menu">Menu</Option>
					<Option value="list">List</Option>
					<Option value="checkbox">Checkbox</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="optionLabelOff2" type="textfield" defaultValue="" readonly="true" visibleBindingId="optionGroupOff2" visibleBindingValue="textfield,menu,list">
				<Label>Field:</Label>
			</Field>
			
			<Field id="checkValueOff2" type="checkbox" visibleBindingId="optionGroupOff2" visibleBindingValue="checkbox">
				<Label> </Label>
				<Description>Enable</Description>
			</Field>
			
			<Field id="strValueOff2" type="textfield" visibleBindingId="optionGroupOff2" visibleBindingValue="textfield">
				<Label>Value:</Label>
			</Field>
			
			<Field type="menu" id="menuValueOff2" defaultValue="on" visibleBindingId="optionGroupOff2" visibleBindingValue="menu">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=menuValueOff2, group=2, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="list" id="listValueOff2" defaultValue="on" visibleBindingId="optionGroupOff2" visibleBindingValue="list">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=listValueOff2, group=2, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>	
			
			<!-- ** ACTION FIELD 3 ** -->
			<Field type="menu" id="optionGroupOff3" defaultValue="hidden" hidden="true">
				<Label>GROUP 3 DISPLAY</Label>
				<List>
					<Option value="hidden">Hidden</Option>
					<Option value="textfield">Text Field</Option>
					<Option value="menu">Menu</Option>
					<Option value="list">List</Option>
					<Option value="checkbox">Checkbox</Option>
				</List>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="optionLabelOff3" type="textfield" defaultValue="" readonly="true" visibleBindingId="optionGroupOff3" visibleBindingValue="textfield,menu,list">
				<Label>Field:</Label>
			</Field>
			
			<Field id="checkValueOff3" type="checkbox" visibleBindingId="optionGroupOff3" visibleBindingValue="checkbox">
				<Label> </Label>
				<Description>Enable</Description>
			</Field>
			
			<Field id="strValueOff3" type="textfield" visibleBindingId="optionGroupOff3" visibleBindingValue="textfield">
				<Label>Value:</Label>
			</Field>
			
			<Field type="menu" id="menuValueOff3" defaultValue="on" visibleBindingId="optionGroupOff3" visibleBindingValue="menu">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=menuValueOff3, group=3, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="list" id="listValueOff3" defaultValue="on" visibleBindingId="optionGroupOff3" visibleBindingValue="list">
				<Label>Value:</Label>
				<List class="self" filter="#actionoptionlist#[index=listValueOff3, group=3, method=Pass]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>			
			
			<Field type="checkbox" id="deviceOffShowStates" defaultValue="false" hidden="true">
				<Label> </Label>
				<Description>Determines if the user should provide a state and value to indicate status</Description>
			</Field>
			
			<Field type="menu" id="deviceOffState" defaultValue="" visibleBindingId="deviceOffShowStates" visibleBindingValue="true">
				<Label>State indicating Off:</Label>
				<List class="self" filter="#devicestates#[index=deviceOffState, srcfield=deviceOff, allowui=True]" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field type="textfield" id="deviceOffStateValue" defaultValue="" visibleBindingId="deviceOffShowStates" visibleBindingValue="true">
				<Label>State value indicating Off:</Label>
			</Field>
			
			<Field id="deviceListOff" type="list" rows="8" visibleBindingId="methodOff" visibleBindingValue="list">
				<Label>Devices:</Label>
				<List class="indigo.devices" />
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="actionOff" type="menu" visibleBindingId="methodOff" visibleBindingValue="action">
				<Label>Action group:</Label>
				<List class="indigo.actionGroups" />
			</Field>
			
			<Field id="sep_off" type="separator" />
			
			<!-- *********** COMMON *********** -->
			
			<Field type="menu" id="treatAs" defaultValue="switch" >
				<Label>Type of wrapper:</Label>
				<List>
					<Option value="switch">Switch</Option>
					<Option value="lock">Lock</Option>
					<Option value="door">Door</Option>
					<Option value="garage">Garage Door</Option>
					<Option value="window">Window</Option>
					<Option value="drape">Window Covering (Curtain, Blind, etc)</Option>
				</List>
			</Field>
			
						
			<!-- *********** CONDITIONS *********** -->
			
			<Field type="menu" id="conditions" defaultValue="none" >
				<Label>Conditions:</Label>
				<List class="self" filter="#conditions_topmenu#" method="getCustomList" dynamicReload="true"/>
				<CallbackMethod>formFieldChanged</CallbackMethod>
			</Field>
			
			<Field id="placeholder" type="label" visibleBindingId="methodOff" visibleBindingValue="false" alwaysUseInDialogHeightCalc="true">
				<Label>





.</Label>
			</Field>
			
		</ConfigUI>
		
		<States>
			<!-- All EPS plugins have this state and use it for the Indigo lists -->
			<State id="statedisplay">
				<ValueType>String</ValueType>
				<TriggerLabel>Current device state</TriggerLabel>
				<ControlPageLabel>Current device state</ControlPageLabel>
			</State>
		</States>
		<UiDisplayStateId>statedisplay</UiDisplayStateId>
	</Device>
	

</Devices>
